--- 
wordpress_id: 403
layout: post
title: !binary |
  6K6K5pu05a+G56K85piv54K65LqG5o+Q5Y2H5a+G56K85a6J5YWo5oCnPw==

date: 2007-07-06 15:32:15 +08:00
wordpress_url: http://blog.xdite.net/?p=403
---
昨日稿擠，故本稿延至今日刊出 XD

丁丁大站此次因為變更密碼手段粗糙，而導致全國上下震怒。更改密碼的原因眾說紛紜，但官方統一的說法是為了整合資料庫做準備。（通常兩站密碼格式不同要整合時，唯一解決的方法只有請使用者重新設定密碼，只是沒有人像丁丁大站手段如此粗糙與惡劣，<b>前一陣子啞唬旗下子公司 Flickr 也在整合帳號，就從未爆發過民怨，也未向世界各地的使用者收取證件掃瞄檔</b>）


這一次主要的變更就是將傳輸方式改為 SSL 傳輸 以及 變更密碼規則與長度。


只不過這次的變更卻暴露了有名大站之前的加密措施是多麼不安全的，還有變更密碼的流程是多麼設計不良的。更重要的是，變更後的密碼真的有更安全嗎？


也許很多人不知道變更為 SSL 有什麼差別？昨天筆者還在 圍紀實驗室  <a href="http://zh.scratchpad.wikia.com/wiki/2007%E5%B9%B4%E5%8F%B0%E7%81%A3%E9%83%A8%E8%90%BD%E6%A0%BC%E5%A4%A7%E4%BA%8B%E8%A8%98">2007年台灣部落格大事記</a> 7/4 的條目是這樣寫的：「<b>無名小站密碼改用SSL 加密，強制用戶改密碼</b>」。


老實說我覺得這樣寫不是妥當，因為這兩句是不同兩件事，這樣擺在一起好像是 SSL 是一種加密格式的樣子，為了採用 SSL 加密才要改密碼？所以筆者跑去對該小條做了小修正。


SSL 是一種加密傳輸，不是一種密碼編碼格式 -_-，一般要是我們看到某網址前面是 https:// 開頭的，進這個網頁當中的傳輸過程就是就是用 SSL 加密（信用卡刷卡頁面常用）。傳統上，所有你用瀏覽器瀏覽的封包，因為通訊機制使然，幾乎都是公開透明的（只要在同區網，掛監聽，帳號密碼手到擒來）。所以之前丁丁大站被人家罵得很凶，也是因為愛假借提升安全的名義，做一些丁丁行為（這道大旗真的很好用，講了就沒多少人會抗議，而他們又在資料保護上惡名昭彰，所以只要舉著提升資訊安全度，就可以胡亂惡搞，只是這次踢到鐵板.....），可是連密碼加密傳輸這個基本的防護措施卻都沒做。


而為什麼整合資料庫，要變更密碼呢？在一般不諳網站設計的人眼中都會覺得，阿～～我只要使用這個站的服務，站長一定會知道密碼的！其實不然，端看程式怎麼設計。一般來說，較安全的設計都是將密碼用 function 加密，然後存進密碼欄位裡。輸入密碼時再比對是否符合。


假如我設定的密碼是 1234，加密過後有可能變成 DCBA，存進資料庫的時候就是存 DCBA。你登入時系統只檢查跟資料庫驗證時最後是不是 DCBA，所以即使入侵被拿到 DATABASE 也不一定有用。（所以你密碼不見，通常網站客服和站長都會告訴你他們沒辦法幫你拿回密碼，只能重設。）

駭客（Cracker）們破解的方法通常是採取字典攻擊法去反解，拿常見的字下去跑加密。我不知道 DCBA 原始字串是什麼，可是我就是拿幾千組可能字串下去跑加密，誰加密後跑出 DCBA 那就是原始密碼囉。


不過這在不同家公司設計的系統整合時就頭大囉。要是大家都用同一套加密函數還好，要是不同，不知道原始密碼是很難整合的，筆者猜測也許這就是要變更密碼的主因。


只是，變更後會更安全嗎？誰都不敢保證，因為這只是一種轉移密碼的手段。只是有名大站原始的密碼最短只要 4 碼，而且沒有強迫英數夾雜。而新密碼強迫大家變更為六碼以上，而且必須英數夾雜。理論上，的確會使字典攻擊法難度變高，因為要跑更多組的樣本去比。


但是，在昨天筆者在寫完黑特文不久後，<a href="http://blog.xdite.net/?p=398#comment-30932">就有讀者馬上在推文裡</a>說，丁丁客服竟然有辦法幫使用者<a href="http://www.flickr.com/photo_zoom.gne?id=734501885&amp;size=o">測試新密碼是否可以正確</a> login。

<a href="http://www.flickr.com/photos/14765209@N00/734518009/" title="相片分享"><img src="http://farm2.static.flickr.com/1239/734518009_b4e5cfa258_o.jpg" alt="plaintext" height="342" width="658" /></a>


雖然有<a href="http://blog.gslin.org/archives/2007/07/05/1227/#comments">知情長輩透露</a> Y 社的設計是絕不存明碼（就是一目了然的原始密碼）。但是，這張圖不免讓大家猜測，丁丁大站是否藉此次變更密碼的動作，自己偷偷存了一份明碼回家？


在<a href="http://blog.xdite.net/?p=402">上一篇文章的新聞</a>裡，雖然受害人數被官方亂掰，但唯一一個共同點都是宣稱已有七十萬人變更密碼？那是不是代表已經有產生了七十萬份密碼明碼？（估計駭客們會更高興了，資料庫打下來本來還要跑字典檔反解，現在如果再入侵成功，拿到的就不需要了...）


偉哉丁丁大站，變更密碼的用意是為了提升密碼安全性。只是偷存明碼這個行為，幾乎跟向用戶收雙證件掃瞄本一樣的搞笑吧？
